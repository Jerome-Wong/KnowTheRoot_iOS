# C++知识总结：虚函数

## 一、虚函数和多态

**1.作用：**  
C++中的虚函数主要是实现了**多态**的机制。  
**2.多态：**  
> 多态的定义：一个函数，多种方法。  
> 多态的目的：接口重用。

用父类型的指针指向其子类的实例，然后通过父类的指针调用实际子类的成员函数。简单的理解就是“父类指针调用子类成员函数”。

## 二、虚函数的实现

### 1.虚函数表

#### 作用
C++的虚函数是通过一张虚函数表来实现的，简称V-Table。

在虚函数表中，主要存放来一个**类的虚函数的地址表**，保证其真实的反应实际的函数。  

当我们用父类的指针来操作一个子类的时候，虚函数表就像一个**地图**一样，指明了实际所应该调用的函数。

#### 虚函数表的表现

C++编译器应该保证**虚函数表的指针存在于对象实例中最前面的位置**，这是为了保证取到虚函数表的最高性能。

当我们通过对象实例的地址得到这张虚函数表之后，就可以遍历其中的函数指针，并调用相应的函数。

#### 虚函数表的内存表现

**内存大小：**  
虚函数表指针的大小为4字节。  

当类中存在虚函数的时候，这个类的大小就增加类4个字节，这个4字节就是虚函数表的指针，存放的是虚函数的地址。

#### 父类的虚函数表和子类的虚函数表

父类的虚函数表和子类的虚函数表是两个独立的表。但两个表之间有继承关系，所以子类的表里面也有父类的虚函数指针。  
但如果子类中有和父类中一样的函数名，那么**子类的虚函数就覆盖了子类虚函数表中所继承的父类虚函数地址**。

## 三、虚函数和纯虚函数

纯虚函数是一种特殊的虚函数,是一种没有具体实现的虚函数。

## 四、iOS和虚函数的关系

