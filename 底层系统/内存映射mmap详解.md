# 内存映射mmap详解
  
### 什么是内存映射？
所谓内存映射，就是**将文件的磁盘扇区映射到进程的虚拟内存空间**的过程。

### 操作系统中的进程 
- 进程就是一个正在运行的应用程序
- 每一个进程都是独立的，并且每一个进程都在一个独立的、受保护的空间内
- 在Linux系统中，通常使用fork()方法来开启一个新的进程
- 在iOS系统中，每一个进程都有自己的内存和磁盘空间，其他的进程是不被允许访问的

## 操作系统读写文件流程

1.进程发起一个读文件请求;  

2.内核通过查找**进程文件符表**，定位到内核已打开的文件集上的文件信息，从而找到对应文件的inode;  

3.inode在地址空间（address_space）上查找要请求的文件**是否已经缓存在内核页的高速缓存中**，如果存在，则直接放回该文件的内容;  

4.如果文件不存在高速缓存中，则通过inode定位到文件的磁盘地址，**将数据从磁盘复制到内核页高速缓存。之后再次范圣琦读页面的过程，将内核高速缓存中的数据发送给用户进程**；

### 什么是inode?

>全称为index node，既**存储文件元信息的区域**，中文译名“索引节点”。  
>
>例如包含：文件权限、文件拥有者的UID、文件的大小等等。

